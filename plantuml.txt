@startuml

package "Database Schema" {

  enum status_enum {
    Active,
    Inactive
  }

  enum lob_enum {
    Medicare,
    Commercial
  }

  entity "team" {
    team_id : SERIAL [PK]
    team_name : VARCHAR
    active_status : status_enum
    LOB : lob_enum
  }

  entity "role" {
    role_id : SERIAL [PK]
    role_name : VARCHAR
    active_status : status_enum
    LOB : lob_enum
  }

  entity "manager" {
    manager_id : SERIAL [PK]
    managerFirstName : VARCHAR
    managerLastName : VARCHAR
    active_status : status_enum
    LOB : lob_enum
  }

  entity "language" {
    language_id : SERIAL [PK]
    lang_name : VARCHAR
    active_status : status_enum
    LOB : lob_enum
  }

  entity "staff" {
    staff_id : SERIAL [PK]
    racf : VARCHAR
    first_name : VARCHAR
    last_name : VARCHAR
    team_id : INT [FK]
    role_id : INT [FK]
    manager_id : INT [FK]
    LOB : lob_enum
    active_status : status_enum
  }

  entity "staff_language" {
    staff_id : INT [FK]
    language_id : INT [FK]
    active_status : status_enum
  }

  entity "staff_history" {
    history_id : SERIAL [PK]
    staff_id : INT [FK]
    ...
    change_type : VARCHAR
    change_timestamp : TIMESTAMP
  }

  entity "staff_language_history" {
    history_id : SERIAL [PK]
    staff_id : INT [FK]
    language_id : INT [FK]
    ...
    change_type : VARCHAR
    change_timestamp : TIMESTAMP
  }

  entity "member" {
    member_id : SERIAL [PK]
    cipId : VARCHAR
    first_name : VARCHAR
    last_name : VARCHAR
    active_status : status_enum
  }

  entity "member_language" {
    member_id : INT [FK]
    language_id : INT [FK]
    updated_by_staff_id : INT [FK]
    active_status : status_enum
  }

  entity "member_language_history" {
    history_id : SERIAL [PK]
    member_id : INT [FK]
    language_id : INT [FK]
    updated_by_staff_id : INT [FK]
    ...
    change_type : VARCHAR
    change_timestamp : TIMESTAMP
  }

  staff "0..n" -- "1" team : has
  staff "0..n" -- "1" role : has
  staff "0..n" -- "1" manager : reports to

  staff_language "0..n" -- "1" staff : links
  staff_language "0..n" -- "1" language : speaks

  staff_history "0..n" -- "1" staff : records change of
  staff_language_history "0..n" -- "1" staff_language : records change of

  member_language "0..n" -- "1" member : speaks
  member_language "0..n" -- "1" language : spoken by
  member_language "0..n" -- "1" staff : updated by
  
  member_language_history "0..n" -- "1" member_language : records change of

}

@enduml
